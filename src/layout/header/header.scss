@use 'styles/utils';
@use 'burger-menu';
@use 'catalog-menu';

body:has(main.main .main-hero) .header {
    margin-bottom: -98px;
}

.header {
    position: sticky;
    z-index: 10;
    top: 0;
    color: white;
    @include utils.transition((background-color, color));

    &:has(:is(.catalog-menu.opened, .burger-menu.opened)) {
        color: var(--accent);
        background-color: var(--main);

        .header__logo,
        .icon,
        .header__geo-button {
            filter: var(--filter-accent);
        }

        .header__menu-button {
            &::before,
            &::after {
                background-color: var(--accent);
            }
        }

        .header__inner {
            border-bottom-color: rgba(110, 77, 49, 0.2);
        }
    }

    &:has(.catalog-menu.opened) &__menu-list li > :is(a, button):not([data-action='catalog-menu']) {
        opacity: 0.5;
    }

    &__inner {
        gap: 30px;
        position: relative;
        z-index: 2;
        padding: 30px 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        @include utils.transition(border-bottom-color);
    }

    &__logo {
        height: 37px;
        @include utils.transition(filter);

        img {
            object-fit: contain;
            object-position: left;
            height: 100%;
        }
    }

    &__geo-button {
        gap: 10px;
        filter: var(--filter-white);
        display: flex;
        align-items: center;
        font-size: 1.4rem;
        font-weight: 500;
        letter-spacing: 0.02rem;
        line-height: 1.3;
        text-transform: uppercase;
        @include utils.transition(filter);

        &::before {
            content: '';
            /* @skip-scaling */
            width: 30px;
            /* @skip-scaling */
            height: 30px;
            @include utils.bg-defaults(contain);
            background-image: url('assets/icons/geo.svg');
        }
    }

    &__menu-list {
        gap: 60px;
        display: flex;
        align-items: center;
        font-family: var(--steelfish);
        font-size: 2.8rem;
        letter-spacing: 0.01rem;
        line-height: 1.05;

        li {
            position: relative;

            & > :is(a, button) {
                text-transform: uppercase;
                @include utils.transition(opacity);
            }

            span {
                position: absolute;
                bottom: 100%;
                left: calc(100% + 4px);
                font-family: var(--firs-neue);
                font-size: 1.4rem;
                line-height: 100%;
                opacity: 0.6;
            }

            @include utils.hover {
                & > :is(a, button) {
                    opacity: 0.5;
                }
            }

            @include utils.hover {
                & > ul {
                    opacity: 1;
                    visibility: visible;
                }
            }

            ul {
                gap: 20px;
                position: absolute;
                top: calc(100% + 20px);
                padding: 32px;
                display: flex;
                flex-direction: column;
                color: var(--accent);
                font-family: var(--steelfish);
                font-size: 2.8rem;
                letter-spacing: 0.01rem;
                line-height: 1.05;
                text-transform: uppercase;
                opacity: 0;
                visibility: hidden;
                background-color: white;
                @include utils.transition((opacity, visibility));

                &::before {
                    content: '';
                    position: absolute;
                    top: -8px;
                    left: 10px;
                    width: 0;
                    height: 0;
                    border-right: 6px solid transparent;
                    border-bottom: 9px solid #ffffff;
                    border-left: 6px solid transparent;
                }
            }
        }
    }

    &__menu-button {
        gap: 8.5px;
        width: 60px;
        display: flex;
        flex-direction: column;

        &::before,
        &::after {
            content: '';
            width: 100%;
            /* @skip-scaling */
            height: 2px;
            background-color: white;
            @include utils.transition(background-color);
        }
    }

    &__actions-list {
        gap: 30px;
        display: flex;
        align-items: center;
    }

    &__mobile-search-button {
        display: none;
    }
}

@media only screen and (max-width: utils.$tablet1000) {
    .header {
        &__inner {
            gap: 15px;
            padding: 10px 0;
        }

        &__menu-wrapper {
            position: absolute;
            opacity: 0;
            visibility: hidden;
        }

        &__logo {
            height: 23px;
        }

        &__menu-button {
            gap: 7px;
            width: 35px;

            &::after {
                width: 15px;
            }
        }

        &__geo-button {
            display: none;
        }

        &__mobile-search-button {
            display: block;
        }

        &__actions-list {
            gap: 20px;
        }

        &__mobile-actions-list {
            gap: 15px;
            order: -1;
        }

        &__desktop-actions-list {
            gap: 10px;

            .icon-search,
            .icon-profile {
                display: none;
            }
        }
    }
}
